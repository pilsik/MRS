<form [formGroup]="validatingForm" class="form-signup">
    <p class="h5 text-center mb-4">Sign up</p>
    <div class="alert alert-danger" role="alert" *ngIf="errorMessage">{{errorMessage}}</div>

    <div class="md-form">
        <i class="fa fa-user prefix grey-text"></i>
        <i class="fa fa-spinner fa-pulse" [hidden]="!validatingForm.get('controlUsername').pending.valueOf()"></i>
        <input type="text" class="form-control" name="username" id="username" #username [(ngModel)]="user.username"
               formControlName="controlUsername" mdbActive
               [ngClass]="{ 'has-error': validatingForm.controls['controlUsername'].touched.valueOf() && !validatingForm.get('controlUsername').valid.valueOf() }"/>
        <label for="username">Username</label>
        <div *ngIf="validatingForm.controls['controlUsername'].touched">
            <div class="alert alert-danger"
                 *ngIf="validatingForm.controls['controlUsername'].errors?.required">Please enter username
            </div>
            <div class="alert alert-danger"
                 *ngIf="validatingForm.controls['controlUsername'].errors?.minlength">Username must be at least 3 characters long
            </div>
            <div class="alert alert-danger"
                 *ngIf="validatingForm.controls['controlUsername'].errors && validatingForm.get('controlUsername').errors.usernameExist">Username already exist
            </div>
        </div>
    </div>


    <div class="md-form">
        <i class="fa fa-envelope prefix grey-text"></i>
        <i class="fa fa-spinner fa-pulse" [hidden]="!validatingForm.get('controlEmail').pending.valueOf()"></i>
        <input type="text" class="form-control" name="email" id="email" [(ngModel)]="user.email"
               formControlName="controlEmail" mdbActive
               [ngClass]="{ 'has-error': validatingForm.controls['controlEmail'].touched.valueOf() && !validatingForm.get('controlEmail').valid.valueOf() }"/>
        <label for="email">Email Address</label>
        <div *ngIf="validatingForm.controls['controlEmail'].touched">
            <div class="alert alert-danger"
                 *ngIf="validatingForm.controls['controlEmail'].errors?.required">Please enter email
            </div>
            <div class="alert alert-danger"
                 *ngIf="validatingForm.controls['controlEmail'].errors?.email">Incorrect email
            </div>
            <div class="alert alert-danger"
                 *ngIf="validatingForm.controls['controlEmail'].errors && validatingForm.get('controlEmail').errors.emailExist">Email already exist
            </div>
        </div>
    </div>

    <div class="md-form">
        <i class="fa fa-lock prefix grey-text"></i>
        <input type="password" class="form-control" name="password" id="password" [(ngModel)]="user.password"
               formControlName="controlPassword" mdbActive
               [ngClass]="{ 'has-error': validatingForm.controls['controlPassword'].touched.valueOf() && !validatingForm.get('controlPassword').valid.valueOf() }"/>
        <label for="password">Password</label>
        <div *ngIf="validatingForm.controls['controlPassword'].touched">
            <div class="alert alert-danger"
                 *ngIf="validatingForm.controls['controlPassword'].errors?.required">Please enter password
            </div>
            <div class="alert alert-danger"
                 *ngIf="validatingForm.controls['controlPassword'].errors?.minlength">Password must be at least 3 characters long
            </div>
        </div>
    </div>

    <button class="btn btn-lg btn-primary btn-block btn-signin" type="submit" (click)="register()" [disabled]="!validatingForm.valid">Create Account</button>
    <button [routerLink]="['/login']" class="btn btn-lg btn-danger btn-block btn-cancel" type="button">Cancel</button>
</form>

